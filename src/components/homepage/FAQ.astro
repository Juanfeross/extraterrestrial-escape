---
import { Icon } from "astro-icon/components";

const faqs = [
  {
    question: "¿Qué tipo de proyectos pueden desarrollar?",
    answer:
      "Podemos desarrollar una amplia gama de proyectos web, desde sitios corporativos hasta aplicaciones web complejas y e-commerce.",
  },
  {
    question: "¿Cuál es su proceso de trabajo?",
    answer:
      "Nuestro proceso incluye una fase de planificación, diseño, desarrollo, pruebas y lanzamiento. Mantenemos una comunicación constante con el cliente en cada etapa.",
  },
  {
    question: "¿Ofrecen mantenimiento después del lanzamiento?",
    answer:
      "Sí, ofrecemos servicios de mantenimiento y soporte continuo para asegurar que tu proyecto siga funcionando de manera óptima.",
  },
];
---

<section class="py-20 bg-gradient-to-b from-black to-gray-900">
  <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
    <h2 class="text-4xl font-bold text-white text-center mb-4">
      Preguntas Frecuentes
    </h2>
    <p class="text-xl text-blue-300 text-center mb-12">
      Resolvemos tus dudas para que puedas tomar la mejor decisión
    </p>
    <div class="space-y-6">
      {
        faqs.map((faq, index) => (
          <div class="faq-item bg-gray-800 rounded-xl overflow-hidden transition-all duration-300 hover:shadow-lg hover:shadow-blue-500/20">
            <button
              class="w-full text-left p-6 focus:outline-none focus:bg-gray-700 transition-colors duration-300"
              id={`faq-button-${index}`}
              aria-expanded="false"
              aria-controls={`faq-answer-${index}`}
            >
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-white pr-8">
                  {faq.question}
                </h3>
                <Icon
                  name="mdi:chevron-down"
                  class="w-6 h-6 text-blue-400 transform transition-transform duration-300"
                />
              </div>
            </button>
            <div
              id={`faq-answer-${index}`}
              class="faq-answer hidden px-6 pb-6"
              role="region"
              aria-labelledby={`faq-button-${index}`}
            >
              <p class="text-gray-300">{faq.answer}</p>
            </div>
          </div>
        ))
      }
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const faqItems = document.querySelectorAll(".faq-item");

    faqItems.forEach((item) => {
      const button = item.querySelector("button");
      const answer = item.querySelector(".faq-answer");
      const icon = item.querySelector("svg");

      button.addEventListener("click", () => {
        const expanded =
          button.getAttribute("aria-expanded") === "true" || false;

        button.setAttribute("aria-expanded", !expanded);
        answer.classList.toggle("hidden");
        icon.classList.toggle("rotate-180");

        if (!expanded) {
          answer.style.maxHeight = answer.scrollHeight + "px";
        } else {
          answer.style.maxHeight = null;
        }

        button.blur();
      });
    });
  });
</script>

<style>
  .faq-answer {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
  }

  /* Nuevo estilo para manejar el foco */
  .faq-item button:focus-visible {
    outline: 2px solid #3b82f6; /* Un azul que coincide con el tema */
    outline-offset: -2px;
  }
</style>
